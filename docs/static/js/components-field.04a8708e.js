(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./src/components/Field.mdx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/@mdx-js/tag/dist/index.js"),i=(n("./src/docz.less"),n("./node_modules/docz/dist/index.m.js")),s=n("./src/components/Focuser.tsx"),l=n("./src/components/TabBoundary.tsx");function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,p(t).call(this,e))).refContainer=null,n.refFocuser=null,n.tabRegistry=null,n.clickOutside=function(e){n.state.isEditing&&n.props.submitOnClickOutside&&(null==n.refContainer||n.refContainer.contains(e.target)||n.props.onSubmit(n.stopEditing,"click-outside"))},n.onBlur=function(e){e.stopPropagation(),n.state.isEditing&&n.props.submitOnBlur&&n.props.onSubmit(n.stopEditing,"blur")},n.onClick=function(e){e.preventDefault(),e.stopPropagation(),n.startEditing()},n.onContainerClick=function(e){e.stopPropagation(),e.preventDefault()},n.onEscape=function(){n.state.isEditing?n.stopEditing():null!=n.tabRegistry&&n.tabRegistry.focusParent()},n.onFieldKeyDown=function(e){if(!n.props.disabled){var t=e.shiftKey||e.metaKey||e.ctrlKey||e.altKey;"Enter"!==e.key||t?"Escape"!==e.key||t||(e.preventDefault(),e.stopPropagation(),n.stopEditing()):(e.preventDefault(),e.stopPropagation(),n.props.onSubmit(n.stopEditing,"enter-key"))}},n.onLabelClick=function(e){e.preventDefault(),e.stopPropagation(),n.focus({focusOrigin:"mouse"})},n.renderWithTabRegistry=function(e){return n.tabRegistry=e,r.createElement("div",{className:n.props.className||"field-container",onClick:n.onContainerClick,ref:n.setContainerRef},r.createElement(s.a,{disabled:n.props.disabled,focusKey:n.props.label,key:"focuser",onArrowKeys:n.props.onArrowKeys,onDelete:n.props.onDelete,onEnter:n.startEditing,onEscape:n.onEscape,onNavigationKeys:n.props.onNavigationKeys,onSpace:n.startEditing,ref:n.setFocuserRef}),r.createElement("div",{className:"field"+(null==n.props.errorMessage?"":" has-error"),onBlur:n.onBlur,onClick:n.onClick,onKeyDown:n.onFieldKeyDown},r.createElement("label",{onClick:n.onLabelClick},n.props.label),n.props.renderEditor(n.state.isEditing,n.stopEditing),n.renderErrorMessage()))},n.setContainerRef=function(e){n.refContainer=e},n.setFocuserRef=function(e){n.refFocuser=e},n.startEditing=function(){n.props.disabled||n.state.isEditing||(n.setState({isEditing:!0}),null!=n.props.onEditStart&&n.props.onEditStart(n.stopEditing))},n.stopEditing=function(e){n.state.isEditing&&(n.setState({isEditing:!1},function(){e||n.focus({focusOrigin:"user"})}),null!=n.props.onEditStop&&n.props.onEditStop())},n.state={isEditing:!1},n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.clickOutside,!1)}},{key:"componentWillReceiveProps",value:function(e){!this.props.disabled&&e.disabled&&this.stopEditing(!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickOutside,!1)}},{key:"focus",value:function(e){return!this.props.disabled&&null!=this.refFocuser&&this.refFocuser.focus(e)}},{key:"renderErrorMessage",value:function(){return null==this.props.errorMessage?null:r.createElement("div",{className:"error-message"},this.props.errorMessage)}},{key:"render",value:function(){return r.createElement(l.a.Consumer,null,this.renderWithTabRegistry)}}])&&d(n.prototype,o),a&&d(n,a),t}();f.defaultProps={disabled:!1,submitOnBlur:!1,submitOnClickOutside:!1};try{f.displayName="Field",f.__docgenInfo={description:"",displayName:"Field",props:{className:{defaultValue:null,description:"Set the classname of the container element,\nthis makes the component compatible with most css-in-js libraries\nlike styled-components, glamor and emotion etc.",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Whether or not the field is disabled; cannot be focused, start editing,\nno navigation key events will be triggered/propagated.",name:"disabled",required:!1,type:{name:"boolean"}},errorMessage:{defaultValue:null,description:"If provided, the field get the className .has-error\nadded, and render the error message adjecent to editor.",name:"errorMessage",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"The label of the editor, must be unique amoung siblings\nwithing a TabBoundary/TabRegistry.",name:"label",required:!0,type:{name:"string"}},onArrowKeys:{defaultValue:null,description:"Called when the underlying focuser has focus and\nthe user presses down any arrow key of the keyboard.\n@deprecated use [onNavigationKeys].",name:"onArrowKeys",required:!1,type:{name:"ArrowKeyHandler"}},onDelete:{defaultValue:null,description:"Called when the underlying focuser has focus\nand the user presses the delete key of the keyboard.",name:"onDelete",required:!1,type:{name:"() => void"}},onEditStart:{defaultValue:null,description:"Called just before the fields switches to edit mode.\nThis is a great place to set internal state of any input field\nbefore going into edit mode.",name:"onEditStart",required:!1,type:{name:"EditStartHandler"}},onEditStop:{defaultValue:null,description:"Called just after the stopEditing is called, and switches back\nto read mode.\nThis is a great place to clean up after edit more, or reset any state\nbefore going back into read mode.",name:"onEditStop",required:!1,type:{name:"() => void"}},onNavigationKeys:{defaultValue:null,description:"The preferred handler to use for handling all keyboard navigation in read mode.\nNavigation in edit mode should be implemented in the editor.",name:"onNavigationKeys",required:!1,type:{name:"NavigationKeyHandler"}},onSubmit:{defaultValue:null,description:"Called when submitting the field. The submit handler is responsible\nfor invoking stop editing, and put the field back into read mode.\nThe handler gets passed info about how the field is submitted.",name:"onSubmit",required:!0,type:{name:"SubmitHandler"}},renderEditor:{defaultValue:null,description:"Render prop responsible for rendering the actual editor both in read and edit mode.",name:"renderEditor",required:!0,type:{name:"EditorRenderer"}},submitOnBlur:{defaultValue:{value:"false"},description:"Whether or not a blur event caught on the inside the field component\nshould trigger submit.",name:"submitOnBlur",required:!1,type:{name:"boolean"}},submitOnClickOutside:{defaultValue:{value:"false"},description:"Whether or not click-outside of the field and/or its descendant components\nshould trigger submit.",name:"submitOnClickOutside",required:!1,type:{name:"boolean"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Field.tsx#Field"]={docgenInfo:f.__docgenInfo,name:"Field",path:"src/components/Field.tsx#Field"})}catch(F){}var b=n("./src/TabRegistry.ts"),g=n("./src/FieldNavigation.ts");function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){o=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",function(){return C});var C=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w(this,k(t).call(this,e))).layout=null,n}var n,u,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,o.a.Component),n=t,(u=[{key:"render",value:function(){var e=this.props,t=e.components,n=h(e,["components"]);return o.a.createElement(a.MDXTag,{name:"wrapper",components:t},o.a.createElement(a.MDXTag,{name:"h1",components:t,props:{id:"field"}},"Field"),o.a.createElement(a.MDXTag,{name:"p",components:t},"This component helps creating field-by-field editing components,\nso components that have life-cycles that looks something like this:"),o.a.createElement(a.MDXTag,{name:"ol",components:t},o.a.createElement(a.MDXTag,{name:"li",components:t,parentName:"ol"},"read mode"),o.a.createElement(a.MDXTag,{name:"li",components:t,parentName:"ol"},"user activates edit mode"),o.a.createElement(a.MDXTag,{name:"li",components:t,parentName:"ol"},"user changes a value"),o.a.createElement(a.MDXTag,{name:"li",components:t,parentName:"ol"},"user submits/persists the new value"),o.a.createElement(a.MDXTag,{name:"li",components:t,parentName:"ol"},"read mode")),o.a.createElement(a.MDXTag,{name:"p",components:t},"And you would like to be able to focus the component in read mode,\nnavigate to next field or focusable component, without having an editable field."),o.a.createElement(a.MDXTag,{name:"h2",components:t,props:{id:"basic-usage"}},"Basic usage"),o.a.createElement(i.Playground,{__codesandbox:"undefined",__position:0,__code:'() => {\n  const onSubmit = stopEditing => stopEditing()\n  const renderEditor = isEditing => {\n    return isEditing ? (\n      <div className="editor active">\n        Edit\n        <Focuser autoFocus={true} focusKey="field-focuser" />\n      </div>\n    ) : (\n      <div className="editor">Read</div>\n    )\n  }\n  return (\n    <Field label="Field" onSubmit={onSubmit} renderEditor={renderEditor} />\n  )\n}',__scope:{props:this?this.props:n,useCallback:r.useCallback,useMemo:r.useMemo,useReducer:r.useReducer,useState:r.useState,Field:f,Focuser:s.a,NavigationContext:l.a,TabRegistry:b.a,createNavigationHandler:g.a}},function(){return o.a.createElement(f,{label:"Field",onSubmit:function(e){return e()},renderEditor:function(e){return e?o.a.createElement("div",{className:"editor active"},"Edit",o.a.createElement(s.a,{autoFocus:!0,focusKey:"field-focuser"})):o.a.createElement("div",{className:"editor"},"Read")}})}),o.a.createElement(a.MDXTag,{name:"h2",components:t,props:{id:"tab-navigation-between-fields"}},"Tab navigation between fields"),o.a.createElement(i.Playground,{__codesandbox:"undefined",__position:1,__code:'() => {\n  const [tabRegistry, setTabRegistry] = useState(() => new TabRegistry())\n  const registryFetcher = useCallback(() => tabRegistry, [])\n  const onArrowKeys = useMemo(\n    () =>\n      createNavigationHandler(\n        [[\'Field1\', \'Field2\'], [\'Field3\', \'Field4\']],\n        registryFetcher,\n      ),\n    [],\n  )\n  const onSubmit = stopEditing => stopEditing()\n  const renderEditor = () => <div className="editor">Value</div>\n  return (\n    <NavigationContext.Provider value={tabRegistry}>\n      <div className="flex-container">\n        <Field\n          label="Field1"\n          onArrowKeys={onArrowKeys}\n          onSubmit={onSubmit}\n          renderEditor={renderEditor}\n        />\n        <Field\n          label="Field2"\n          onArrowKeys={onArrowKeys}\n          onSubmit={onSubmit}\n          renderEditor={renderEditor}\n        />\n      </div>\n      <div className="flex-container">\n        <Field\n          label="Field3"\n          onArrowKeys={onArrowKeys}\n          onSubmit={onSubmit}\n          renderEditor={renderEditor}\n        />\n        <Field\n          label="Field4"\n          onArrowKeys={onArrowKeys}\n          onSubmit={onSubmit}\n          renderEditor={renderEditor}\n        />\n      </div>\n    </NavigationContext.Provider>\n  )\n}',__scope:{props:this?this.props:n,useCallback:r.useCallback,useMemo:r.useMemo,useReducer:r.useReducer,useState:r.useState,Field:f,Focuser:s.a,NavigationContext:l.a,TabRegistry:b.a,createNavigationHandler:g.a}},function(){var e=v(Object(r.useState)(function(){return new b.a}),2),t=e[0],n=(e[1],Object(r.useCallback)(function(){return t},[])),a=Object(r.useMemo)(function(){return Object(g.a)([["Field1","Field2"],["Field3","Field4"]],n)},[]),i=function(e){return e()},s=function(){return o.a.createElement("div",{className:"editor"},"Value")};return o.a.createElement(l.a.Provider,{value:t},o.a.createElement("div",{className:"flex-container"},o.a.createElement(f,{label:"Field1",onArrowKeys:a,onSubmit:i,renderEditor:s}),o.a.createElement(f,{label:"Field2",onArrowKeys:a,onSubmit:i,renderEditor:s})),o.a.createElement("div",{className:"flex-container"},o.a.createElement(f,{label:"Field3",onArrowKeys:a,onSubmit:i,renderEditor:s}),o.a.createElement(f,{label:"Field4",onArrowKeys:a,onSubmit:i,renderEditor:s})))}),o.a.createElement(a.MDXTag,{name:"h2",components:t,props:{id:"setting-up-custom-field"}},"Setting up custom field"),o.a.createElement(i.Playground,{__codesandbox:"undefined",__position:2,__code:"() => {\n  const [state, setState] = useReducer(\n    (oldState, newState) => ({\n      ...oldState,\n      ...newState,\n    }),\n    {\n      editorValue: '',\n      errorMessage: null,\n      value: 'user@domain.tld',\n    },\n  )\n  const onEditStart = useCallback(\n    () => setState({ editorValue: state.value }),\n    [state.value],\n  )\n  const onEditStop = useCallback(() => setState({ errorMessage: null }), [])\n  const onChange = useCallback(\n    e => setState({ editorValue: e.target.value }),\n    [],\n  )\n  const onSubmit = useCallback(\n    (stopEditing, submittedOn) => {\n      if (!/^.+@.+\\..+$/.test(state.editorValue)) {\n        setState({ errorMessage: 'Invalid email address' })\n        return\n      }\n      setState({ value: state.editorValue })\n      stopEditing()\n    },\n    [state.editorValue],\n  )\n  const renderEditor = useCallback(\n    isEditing => {\n      const editor = isEditing ? (\n        <input\n          autoFocus={true}\n          onChange={onChange}\n          spellCheck={false}\n          type=\"email\"\n          value={state.editorValue}\n        />\n      ) : (\n        <div className=\"value\">{state.value}</div>\n      )\n      return (\n        <div className={'editor' + (isEditing ? ' active' : '')}>\n          {editor}\n        </div>\n      )\n    },\n    [state.value, state.editorValue],\n  )\n  return (\n    <Field\n      errorMessage={state.errorMessage}\n      label=\"E-mail\"\n      onSubmit={onSubmit}\n      onEditStart={onEditStart}\n      onEditStop={onEditStop}\n      renderEditor={renderEditor}\n      submitOnBlur={true}\n    />\n  )\n}",__scope:{props:this?this.props:n,useCallback:r.useCallback,useMemo:r.useMemo,useReducer:r.useReducer,useState:r.useState,Field:f,Focuser:s.a,NavigationContext:l.a,TabRegistry:b.a,createNavigationHandler:g.a}},function(){var e=v(Object(r.useReducer)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){E(e,t,n[t])})}return e}({},e,t)},{editorValue:"",errorMessage:null,value:"user@domain.tld"}),2),t=e[0],n=e[1],a=Object(r.useCallback)(function(){return n({editorValue:t.value})},[t.value]),i=Object(r.useCallback)(function(){return n({errorMessage:null})},[]),s=Object(r.useCallback)(function(e){return n({editorValue:e.target.value})},[]),l=Object(r.useCallback)(function(e,r){/^.+@.+\\..+$/.test(t.editorValue)?(n({value:t.editorValue}),e()):n({errorMessage:"Invalid email address"})},[t.editorValue]),u=Object(r.useCallback)(function(e){var n=e?o.a.createElement("input",{autoFocus:!0,onChange:s,spellCheck:!1,type:"email",value:t.editorValue}):o.a.createElement("div",{className:"value"},t.value);return o.a.createElement("div",{className:"editor"+(e?" active":"")},n)},[t.value,t.editorValue]);return o.a.createElement(f,{errorMessage:t.errorMessage,label:"E-mail",onSubmit:l,onEditStart:a,onEditStop:i,renderEditor:u,submitOnBlur:!0})}),o.a.createElement(a.MDXTag,{name:"h2",components:t,props:{id:"props"}},"Props"),o.a.createElement(i.PropsTable,{of:f}))}}])&&S(n.prototype,u),d&&S(n,d),t}()}}]);
//# sourceMappingURL=components-field.945ba5f737702bbd9a02.js.map